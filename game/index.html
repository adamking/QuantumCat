<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schr√∂dinger's Box Arcade</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 class="title">üê± SCHR√ñDINGER'S BOX ARCADE</h1>
            <div class="wallet-info">
                <button id="connectButton" class="btn-connect">Connect Wallet</button>
                <div id="walletAddress" class="wallet-address"></div>
            </div>
        </header>

        <div class="game-container">
            <!-- Token Balance Display -->
            <div class="token-balances">
                <div class="token-display">
                    <span class="token-label">üîÆ QCAT:</span>
                    <span id="qcatBalance" class="token-value">0</span>
                </div>
                <div class="token-display">
                    <span class="token-label">üü¢ ALIVE:</span>
                    <span id="aliveBalance" class="token-value">0</span>
                </div>
                <div class="token-display">
                    <span class="token-label">üî¥ DEAD:</span>
                    <span id="deadBalance" class="token-value">0</span>
                </div>
            </div>

            <!-- Main Game Canvas -->
            <canvas id="gameCanvas" width="800" height="600"></canvas>

            <!-- Game UI Overlay -->
            <div id="gameUI" class="game-ui">
                <div class="instructions">
                    <p>üì¶ Click a sealed box to select it!</p>
                    <p>‚ö° Break the seal and play the mini-game to unbox</p>
                    <p style="color: #00d4ff; margin-top: 10px;">üí° Works without MetaMask in Demo Mode!</p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="unboxButton" class="btn-action" disabled>
                    üîì BREAK SEAL & UNBOX
                </button>
                <button id="reboxButton" class="btn-action" disabled>
                    üì¶ RESEAL (Combine Back to QCAT)
                </button>
                <button id="refreshButton" class="btn-action">
                    üîÑ Refresh Balances
                </button>
            </div>

            <!-- Game Stats -->
            <div class="stats-panel">
                <div class="stat-item">
                    <span class="stat-label">Total Unboxed:</span>
                    <span id="totalUnboxed" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Session Score:</span>
                    <span id="sessionScore" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Alive/Dead Ratio:</span>
                    <span id="ratio" class="stat-value">0/0</span>
                </div>
            </div>
        </div>

        <!-- Transaction Status -->
        <div id="txStatus" class="tx-status hidden"></div>

        <!-- Mini-Game Modal -->
        <div id="miniGameModal" class="modal hidden">
            <div class="modal-content">
                <h2 class="modal-title">‚ö° QUANTUM COLLAPSE GAME ‚ö°</h2>
                <p class="modal-subtitle">Catch the green particles! Avoid the red ones!</p>
                <canvas id="miniGameCanvas" width="400" height="300"></canvas>
                <div class="mini-game-score">
                    <span>Score: <span id="miniGameScore">0</span></span>
                    <span>Time: <span id="miniGameTime">10</span>s</span>
                </div>
                <button id="skipMiniGame" class="btn-skip">Skip & Unbox Now</button>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="resultModal" class="modal hidden">
            <div class="modal-content result-content">
                <h2 id="resultTitle" class="modal-title"></h2>
                <canvas id="resultCanvas" width="200" height="200"></canvas>
                <p id="resultText" class="result-text"></p>
                <button id="closeResult" class="btn-action">Continue</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="game.js"></script>
    <script src="blockchain.js"></script>
</body>
</html>

